<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kalkulator HDP Sederhana</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
body{font-family:Arial,sans-serif;background:#f6f6f6;padding:20px;}
.container{max-width:700px;margin:auto;background:#fff;padding:20px;border-radius:10px;
           box-shadow:0 2px 6px rgba(0,0,0,0.12);}
h2{text-align:center}
label{display:block;margin-top:10px;font-weight:bold}
select,button{width:100%;padding:8px;margin-top:5px;border:1px solid #ccc;border-radius:6px}
button{background:#4CAF50;color:#fff;font-size:16px;cursor:pointer}
button:hover{background:#45a049}
.result{margin-top:15px;padding:12px;background:#eef;border-radius:6px;white-space:pre-wrap}
.chart-container{margin-top:20px}
canvas{max-width:100%;}
</style>
</head>
<body>
<div class="container">
<h2>Kalkulator HDP + Over/Under</h2>

<label>Odds 1X2</label>
<select id="oddsHome1x2"></select>
<select id="oddsDraw1x2"></select>
<select id="oddsAway1x2"></select>

<label>Odds HDP</label>
<select id="hdpHome"></select>
<select id="hdpAway"></select>

<label>Over/Under</label>
<select id="over"></select>
<select id="under"></select>

<button onclick="analisis()">Analisis</button>

<div class="result" id="ringkasan">Ringkasan Prediksi: --</div>

<div class="result" id="hasil" style="display:none">
  <p><b>Probabilitas 1X2:</b> Home <span id="homeProb">--</span> | Draw <span id="drawProb">--</span> | Away <span id="awayProb">--</span></p>
  <p><b>Probabilitas HDP:</b> Home <span id="hdpHomeProb">--</span> | Away <span id="hdpAwayProb">--</span></p>
  <p><b>Probabilitas Over/Under:</b> Over <span id="overProb">--</span> | Under <span id="underProb">--</span></p>
</div>

<div class="chart-container"><canvas id="chart1x2"></canvas></div>
<div class="chart-container"><canvas id="chartHDP"></canvas></div>
<div class="chart-container"><canvas id="chartOU"></canvas></div>

</div>

<script>
let chart1x2, chartHDP, chartOU;

function isiDropdown(id, start, end, step){
  const sel=document.getElementById(id);
  sel.innerHTML="";
  const def=document.createElement("option");
  def.value=""; def.text="-- Pilih --"; sel.appendChild(def);
  for(let v=start; v<=end+1e-9; v+=step){
    const opt=document.createElement("option");
    opt.value=v.toFixed(2);
    opt.text=v.toFixed(2);
    sel.appendChild(opt);
  }
}

function analisis(){
  document.getElementById('hasil').style.display="block";

  const oh=parseFloat(document.getElementById('oddsHome1x2').value);
  const od=parseFloat(document.getElementById('oddsDraw1x2').value);
  const oa=parseFloat(document.getElementById('oddsAway1x2').value);
  const hh=parseFloat(document.getElementById('hdpHome').value);
  const ha=parseFloat(document.getElementById('hdpAway').value);
  const ov=parseFloat(document.getElementById('over').value);
  const un=parseFloat(document.getElementById('under').value);

  let summary=[];

  // 1X2
  if(!isNaN(oh)&&!isNaN(od)&&!isNaN(oa)){
    const s=1/oh+1/od+1/oa;
    const pH=(1/oh)/s*100, pD=(1/od)/s*100, pA=(1/oa)/s*100;
    document.getElementById('homeProb').textContent=pH.toFixed(1)+"%";
    document.getElementById('drawProb').textContent=pD.toFixed(1)+"%";
    document.getElementById('awayProb').textContent=pA.toFixed(1)+"%";
    chart1x2 = buatChart(chart1x2,'chart1x2',['Home','Draw','Away'],[pH,pD,pA]);
    if(pH>50) summary.push("Home Win"); else if(pA>50) summary.push("Away Win");
  }

  // HDP
  if(!isNaN(hh)&&!isNaN(ha)){
    const s=1/hh+1/ha;
    const pHH=(1/hh)/s*100, pAA=(1/ha)/s*100;
    document.getElementById('hdpHomeProb').textContent=pHH.toFixed(1)+"%";
    document.getElementById('hdpAwayProb').textContent=pAA.toFixed(1)+"%";
    chartHDP = buatChart(chartHDP,'chartHDP',['HDP Home','HDP Away'],[pHH,pAA]);
    if(pHH>55) summary.push("HDP Home"); else if(pAA>55) summary.push("HDP Away");
  }

  // Over/Under
  if(!isNaN(ov)&&!isNaN(un)){
    const s=1/ov+1/un;
    const pO=(1/ov)/s*100, pU=(1/un)/s*100;
    document.getElementById('overProb').textContent=pO.toFixed(1)+"%";
    document.getElementById('underProb').textContent=pU.toFixed(1)+"%";
    chartOU = buatChart(chartOU,'chartOU',['Over','Under'],[pO,pU]);
    if(pO>60) summary.push("Over"); else if(pU>60) summary.push("Under");
  }

  document.getElementById('ringkasan').textContent =
    "Ringkasan Prediksi: "+(summary.length?summary.join(" & "):"--");
}

function buatChart(chartRef,canvasId,labels,data){
  if(chartRef) chartRef.destroy();
  return new Chart(document.getElementById(canvasId),{
    type:'pie',
    data:{labels:labels,datasets:[{data:data,backgroundColor:['#4CAF50','#FFC107','#2196F3']}]},
    options:{plugins:{legend:{position:'bottom'}}}
  });
}

// isi dropdown saat DOM siap
document.addEventListener("DOMContentLoaded",()=>{
  isiDropdown("oddsHome1x2",1.00,20.00,0.25);
  isiDropdown("oddsDraw1x2",1.00,20.00,0.25);
  isiDropdown("oddsAway1x2",1.00,20.00,0.25);
  isiDropdown("hdpHome",1.00,20.00,0.25);
  isiDropdown("hdpAway",1.00,20.00,0.25);
  isiDropdown("over",1.00,2.50,0.05);
  isiDropdown("under",1.00,2.50,0.05);
});
</script>
</body>
</html>
