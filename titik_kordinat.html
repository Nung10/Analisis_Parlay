<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Cari Koordinat Stadion / Nama Club (Akurat)</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    input, button { padding: 10px; font-size: 16px; }
    #result { margin-top: 20px; font-size: 18px; }
    .box { margin-bottom: 15px; }
    #map { width:100%; height:300px; margin-top:20px; border:1px solid #ccc; }
  </style>
</head>
<body>

  <h2>üîç Cari Titik Koordinat Stadion / Nama Club</h2>

  <div class="box">
    <input type="text" id="search" placeholder="Contoh: Gelora Bung Karno Stadium, Jakarta, Indonesia" size="60">
    <button onclick="getCoordinates()">Cari Koordinat</button>
  </div>

  <div id="result"></div>
  <div id="map"></div>

  <script>
    let map, marker;

    function initMap(lat=0, lon=0) {
      if (!map) {
        map = new L.Map('map').setView([lat, lon], 15);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
          attribution: '&copy; OpenStreetMap contributors'
        }).addTo(map);
        marker = L.marker([lat, lon]).addTo(map);
      } else {
        map.setView([lat, lon], 15);
        marker.setLatLng([lat, lon]);
      }
    }

    function getCoordinates() {
      const query = document.getElementById("search").value;
      const country = "ID";  // filter ke Indonesia
      const url = `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(query)}&countrycodes=${country}&limit=1`;

      fetch(url, { headers: { 'User-Agent': 'stadium-finder/1.0 (your.email@domain.com)' } })
        .then(response => response.json())
        .then(data => {
          if (data.length > 0) {
            const place = data[0];
            const lat = parseFloat(place.lat);
            const lon = parseFloat(place.lon);
            document.getElementById("result").innerHTML = `
              <strong>Nama Dicari:</strong> ${query}<br>
              <strong>Latitude:</strong> ${lat}<br>
              <strong>Longitude:</strong> ${lon}<br>
              <strong>Alamat Lengkap:</strong> ${place.display_name}<br>
              <br>
              <a href="https://www.google.com/maps?q=${lat},${lon}" target="_blank">üìç Buka di Google Maps</a>
            `;
            initMap(lat, lon);
          } else {
            document.getElementById("result").innerHTML = "‚ö†Ô∏è Tidak ditemukan, coba nama lengkap dengan kota/negara.";
            initMap(0,0);
          }
        })
        .catch(err => {
          document.getElementById("result").innerHTML = "Terjadi kesalahan: " + err;
        });
    }

    // Muat Leaflet js
    (function(){
      const link = document.createElement('link');
      link.rel = 'stylesheet';
      link.href = 'https://unpkg.com/leaflet/dist/leaflet.css';
      document.head.append(link);

      const script = document.createElement('script');
      script.src = 'https://unpkg.com/leaflet/dist/leaflet.js';
      script.onload = () => { initMap(0,0); };
      document.body.append(script);
    })();
  </script>

</body>
</html>
