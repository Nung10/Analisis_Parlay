<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Cari Koordinat Stadion / Club + Negara</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        input, button { padding: 10px; font-size: 16px; }
        .box { margin-bottom: 15px; }
        #result { margin-top: 20px; font-size: 18px; }
        #map { width: 100%; height: 350px; margin-top: 20px; border:1px solid #ccc; }
    </style>
</head>
<body>

    <h2>üìç Cari Koordinat Stadion / Nama Club + Negara</h2>

    <div class="box">
        <input type="text" id="stadium" placeholder="Nama Stadion atau Club (contoh: Old Trafford / Persib Bandung)" size="50">
        <input type="text" id="country" placeholder="Negara (contoh: Inggris / Indonesia)" size="30">
        <button onclick="getCoordinates()">Cari Koordinat</button>
    </div>

    <div id="result"></div>
    <div id="map"></div>

    <script>
        let map, marker;

        function initMap(lat = 0, lon = 0) {
            if (!map) {
                map = new L.Map('map').setView([lat, lon], 2);
                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    attribution: '&copy; OpenStreetMap contributors'
                }).addTo(map);
                marker = L.marker([lat, lon]).addTo(map);
            } else {
                map.setView([lat, lon], 15);
                marker.setLatLng([lat, lon]);
            }
        }

        function getCoordinates() {
            const stadium = document.getElementById("stadium").value;
            const country = document.getElementById("country").value;

            if (!stadium) {
                alert('Masukkan nama stadion atau klub terlebih dahulu!');
                return;
            }

            let url = `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(stadium)}`;
            if (country) {
                url += `&countrycodes=${country.substring(0,2).toLowerCase()}`;
            }
            url += `&limit=1`;

            fetch(url, { headers: { 'User-Agent': 'stadium-finder-app' } })
                .then(response => response.json())
                .then(data => {
                    if (data.length > 0) {
                        const place = data[0];
                        const lat = parseFloat(place.lat);
                        const lon = parseFloat(place.lon);

                        document.getElementById("result").innerHTML = `
                            <strong>Nama Dicari:</strong> ${stadium} (${country})<br>
                            <strong>Latitude:</strong> ${lat}<br>
                            <strong>Longitude:</strong> ${lon}<br>
                            <strong>Alamat Lengkap:</strong> ${place.display_name}<br><br>
                            <a href="https://www.google.com/maps?q=${lat},${lon}" target="_blank">üìå Buka di Google Maps</a>
                        `;

                        initMap(lat, lon);
                    } else {
                        document.getElementById("result").innerHTML = "‚ö†Ô∏è Tidak ditemukan. Coba tambah kota/negara.";
                        initMap(0, 0);
                    }
                })
                .catch(err => {
                    document.getElementById("result").innerHTML = "‚ùå Terjadi kesalahan: " + err;
                });
        }

        // Load Leaflet Maps
        (function () {
            let css = document.createElement('link');
            css.rel = 'stylesheet';
            css.href = 'https://unpkg.com/leaflet/dist/leaflet.css';
            document.head.appendChild(css);

            let js = document.createElement('script');
            js.src = 'https://unpkg.com/leaflet/dist/leaflet.js';
            js.onload = () => { initMap(); };
            document.body.appendChild(js);
        })();
    </script>

</body>
</html>
